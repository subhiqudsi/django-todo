
<html> 

	<head>
		{% load static %}
		<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
		<link rel="stylesheet" href= {%  static "app1/styles.css"  %} >
	 </head>

	 <body>
	 <div class="row">
			<div class ="col-md-2"></div>

			<div class ="col-md-6">
			
			{{warning}}
			<div class="row">
			<form action="{% url 'index' %}" method="post">
			{% csrf_token %}
			<div class="col-md-6">
			<label for="title">Todo list</label><br />
			<input type="text" name="title" id="title" />
			<br><br>
			</div><div class="col-md-3">
			<input class= "btn"  type="submit" value="Add" />
			</div></div></form>
			{% if list %}
			<ul class="todo-list">
				{% for item  in list %}
					<li {% if item.complete is True %} class="completed"{%endif%}>
						<input type="checkbox" value="{{item.id}}" name=""  id="" {% if item.complete is True %} checked {%endif%}>
						<span class="text">{{item}}</span>
						<div class="tools">
						
							<i class="fa fa-trash-o" id="{{ item.id }}"></i>
						</div>
					</li>
				{%endfor%}
			</ul>
			{% else %}
			<p>Write a todo <p>
			{% endif %}
			</div>
			<div class ="col-md-4"></div>
			</div>
			</body>
			#Need organizing
			<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.2.6/jquery.min.js"></script>

			<script>
			
			$('input:checkbox').change(function () {
            console.log($(this));
			//var parent=$(this).closest('li'); 
			var chkbx= $(this);
			var parent=chkbx.parent();
			var chbxid = $(this).val();
            var check = $(this).attr('checked');
			console.log();
            $.ajax({ 
			type:'POST',
			url:'/update',
			data:{
			id:chbxid,
			val:check,
			csrfmiddlewaretoken: $('input[name=csrfmiddlewaretoken]').val()
			},
			success:function(){
			if (chkbx.is(':checked'))			
			{
			parent.addClass('completed')
			}
			else { parent.removeClass('completed');}
			}
			})
        });
			
 
			</script>
</html>